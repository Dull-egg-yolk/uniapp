require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpackageA/checking/index"],{174:function(t,n,e){"use strict";(function(t,n){var r=e(4);e(26);r(e(25));var o=r(e(175));t.__webpack_require_UNI_MP_PLUGIN__=e,n(o.default)}).call(this,e(1)["default"],e(2)["createPage"])},175:function(t,n,e){"use strict";e.r(n);var r=e(176),o=e(178);for(var i in o)["default"].indexOf(i)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(i);e(181);var a,c=e(32),u=Object(c["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,"55f24502",null,!1,r["components"],a);u.options.__file="subpackageA/checking/index.vue",n["default"]=u.exports},176:function(t,n,e){"use strict";e.r(n);var r=e(177);e.d(n,"render",(function(){return r["render"]})),e.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),e.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),e.d(n,"components",(function(){return r["components"]}))},177:function(t,n,e){"use strict";var r;e.r(n),e.d(n,"render",(function(){return o})),e.d(n,"staticRenderFns",(function(){return a})),e.d(n,"recyclableRender",(function(){return i})),e.d(n,"components",(function(){return r}));try{r={uniIcons:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(e.bind(null,360))},uniPagination:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-pagination/components/uni-pagination/uni-pagination")]).then(e.bind(null,368))},tipsPopup:function(){return e.e("components/tips-popup/tips-popup").then(e.bind(null,421))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var t=this,n=t.$createElement,e=(t._self._c,t.inventoryList.length),r=e>0?t.__map(t.inventoryList,(function(n,e){var r=t.__get_orig(n),o=t.getValue(n.Current);return{$orig:r,m0:o}})):null;t.$mp.data=Object.assign({},{$root:{g0:e,l0:r}})},i=!1,a=[];o._withStripped=!0},178:function(t,n,e){"use strict";e.r(n);var r=e(179),o=e.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){e.d(n,t,(function(){return r[t]}))}(i);n["default"]=o.a},179:function(t,n,e){"use strict";(function(t){var r=e(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e(43)),i=r(e(11)),a=r(e(45)),c=e(73),u=e(74),s=e(180);function l(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?l(Object(e),!0).forEach((function(n){(0,i.default)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var f=function(){e.e("components/tips-popup/tips-popup").then(function(){return resolve(e(421))}.bind(null,e)).catch(e.oe)},p={components:{TipsPopup:f},data:function(){return{currentPage:1,totalPages:5,StockTakingRecordID:"",inventoryList:[],statusList:{InProgress:"未盘点",Completed:"已盘点",Discard:"已审核"},query:{Page:1,Size:10,StockTakingRecordID:""},summaryList:{Already:0,Correct:0,Loss:0,Total:0,Wrong:0}}},onLoad:function(t){this.StockTakingRecordID=t.id},methods:{prevPage:function(){this.currentPage>1&&this.currentPage--},nextPage:function(){this.currentPage<this.totalPages&&this.currentPage++},handlePageChange:function(t){("prev"===t.type||"next"===t.type)&&(this.query.Page=t.current,this.getStockTakingString())},getValue:function(t){return 0===t?"":t},onSave:function(){this.updateStockTaking()},updateStockTaking:function(){var n=this;return(0,a.default)(o.default.mark((function e(){var r,i;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={ID:Number(n.StockTakingRecordID),Status:"Completed"},e.next=3,(0,u.updateStockTaking)(r);case 3:i=e.sent,i.ErrorMsg?t.showToast({title:i.ErrorMsg,icon:"none"}):t.navigateTo({url:"/subpackageA/inventoryReport/index?id=".concat(n.StockTakingRecordID)});case 5:case"end":return e.stop()}}),e)})))()},handleInput:(0,s.debounce)((function(t,n,e){var r=e.detail.value;this.$set(this.inventoryList,n,d(d({},this.inventoryList[n]),{},{value:r,Status:"Completed"})),this.updateStockTakingString(t,r)}),500),nextStep:(0,c.throttle)((function(){console.log(this.inventoryList,"this.inventoryList");var n=this.inventoryList.every((function(t){return""!==t.Current}));console.log(n,"allFilled"),n?this.$refs.tipsPopup.open():t.showToast({title:"你有未完成的盘点请盘点",icon:"none"})}),1e3),updateStockTakingString:function(n,e){var r=this;return(0,a.default)(o.default.mark((function i(){var a,c;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a={Current:parseInt(e),Status:"Completed",ID:n.ID,StockTakingRecordID:n.StockTakingRecordID},o.next=3,(0,u.updateStockTakingString)(a);case 3:c=o.sent,c.ErrorMsg?t.showToast({title:c.ErrorMsg,icon:"none"}):r.getStockTakingStringSummary();case 5:case"end":return o.stop()}}),i)})))()},getStockTakingStringSummary:function(){var n=this;return(0,a.default)(o.default.mark((function e(){var r,i;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={StockTakingRecordID:n.StockTakingRecordID},e.next=3,(0,u.getStockTakingStringSummary)(r);case 3:i=e.sent,i.ErrorMsg?t.showToast({title:i.ErrorMsg,icon:"none"}):n.summaryList=i.Data;case 5:case"end":return e.stop()}}),e)})))()},getStockTakingString:function(){var n=this;return(0,a.default)(o.default.mark((function e(){var r;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.query.StockTakingRecordID=n.StockTakingRecordID,e.next=3,(0,u.getStockTakingString)(n.query);case 3:r=e.sent,r.ErrorMsg?t.showToast({title:r.ErrorMsg,icon:"none"}):(n.inventoryList=r.Data,n.totalPages=parseInt(r.Total));case 5:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.StockTakingRecordID&&(this.getStockTakingStringSummary(),this.getStockTakingString())}};n.default=p}).call(this,e(2)["default"])},181:function(t,n,e){"use strict";e.r(n);var r=e(182),o=e.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){e.d(n,t,(function(){return r[t]}))}(i);n["default"]=o.a},182:function(t,n,e){}},[[174,"common/runtime","common/vendor","subpackageA/common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/subpackageA/checking/index.js.map