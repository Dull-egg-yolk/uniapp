require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpackageA/itemDetail/index"],{213:function(t,e,n){"use strict";(function(t,e){var o=n(4);n(26);o(n(25));var i=o(n(214));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n(1)["default"],n(2)["createPage"])},214:function(t,e,n){"use strict";n.r(e);var o=n(215),i=n(217);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n(219);var a,s=n(32),u=Object(s["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,"04c1142e",null,!1,o["components"],a);u.options.__file="subpackageA/itemDetail/index.vue",e["default"]=u.exports},215:function(t,e,n){"use strict";n.r(e);var o=n(216);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},216:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return a})),n.d(e,"recyclableRender",(function(){return r})),n.d(e,"components",(function(){return o}));try{o={imgPopup:function(){return Promise.all([n.e("common/vendor"),n.e("components/img-popup/img-popup")]).then(n.bind(null,391))},inoutPopup:function(){return Promise.all([n.e("common/vendor"),n.e("components/inout-popup/inout-popup")]).then(n.bind(null,399))},stockPopup:function(){return n.e("components/stock-popup/stock-popup").then(n.bind(null,406))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement,n=(t._self._c,parseInt(t.form.ID)),o=parseInt(t.form.ID);t.$mp.data=Object.assign({},{$root:{m0:n,m1:o}})},r=!1,a=[];i._withStripped=!0},217:function(t,e,n){"use strict";n.r(e);var o=n(218),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},218:function(t,e,n){"use strict";(function(t,o){var i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(51)),a=i(n(53)),s=n(72),u=n(73),c=function(){Promise.all([n.e("common/vendor"),n.e("components/img-popup/img-popup")]).then(function(){return resolve(n(391))}.bind(null,n)).catch(n.oe)},l=function(){Promise.all([n.e("common/vendor"),n.e("components/inout-popup/inout-popup")]).then(function(){return resolve(n(399))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/stock-popup/stock-popup").then(function(){return resolve(n(406))}.bind(null,n)).catch(n.oe)},f=(getApp(),{data:function(){return{imgContent:"",title:"",imageUrl:"",screenWidth:"",buttonX:140,buttonY:140,showAdditionalButtons:!1,isButtonDisabled:!1,additionalButtons:[],headerTitle:"",GoodsId:null,form:{Image:"",Name:"",Uint:"",Format:"",Price:"",Class:{Name:""},Suppliers:"1",minStock:"1",maxStock:"1",initialStock:"1",remark:"1",ID:""},list:{},imagePath:"",categories:["默认分类","分类1","分类2","分类3"]}},components:{imgPopup:c,inoutPopup:l,stockPopup:d},onLoad:function(t){console.log(t,"option"),this.GoodsId=t.goosId,this.headerTitle=t.id},onUnload:function(){t.$off("data-detail")},onReady:function(){t.setNavigationBarTitle({title:this.headerTitle})},methods:{delectItme:(0,s.throttle)((0,a.default)(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.form.CurrentStock){e.next=3;break}return t.showToast({title:"当前库存不为0，无法删除",icon:"none"}),e.abrupt("return");case 3:return n={ID:this.form.ID},e.next=6,(0,u.deleteGoodsItme)(n).then((function(e){console.log(e),e.ErrorMsg?t.showToast({title:e.ErrorMsg,icon:"none"}):(t.showToast({title:"删除成功",icon:"none"}),t.navigateBack({delta:1}))}));case 6:case"end":return e.stop()}}),e,this)}))),1e3),getGoodsItme:function(){var e=this;return(0,a.default)(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,u.getGoodsItme)({ID:e.GoodsId}).then((function(n){console.log(n,"res"),e.form=n.Data[0],e.headerTitle=n.Data[0].Name,t.setNavigationBarTitle({title:e.headerTitle})}));case 2:case"end":return n.stop()}}),n)})))()},showPopup:function(){this.$refs.imagePopup.open()},onSave:function(){t.showToast({title:"执行保存操作",icon:"none"})},onClose:function(){console.log("弹窗已关闭")},clickQrCode:(0,s.throttle)((0,a.default)(r.default.mark((function e(){var n,o;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={WarehouseID:this.form.HotelID,GoodsID:this.form.ID},e.next=3,(0,u.getQrcode)(n);case 3:o=e.sent,o.ErrorMsg?t.showToast({title:o.ErrorMsg,icon:"none"}):(this.imageUrl=o.Data,this.imgContent=this.form.Name+" "+this.form.Format+"/"+this.form.Uint,this.$refs.imagePopup.open());case 5:case"end":return e.stop()}}),e,this)}))),500),onMove:function(t){this.buttonX=t.detail.x,this.buttonY=t.detail.y},toggleButtons:function(){if(console.log(111111),this.showAdditionalButtons)this.showAdditionalButtons=!1,this.isButtonDisabled=!1;else{var e=80,n=t.getWindowInfo().windowWidth,o=t.getWindowInfo().windowHeight;this.additionalButtons=[{text:"明细",x:this.buttonX,y:Math.max(0,this.buttonY-e)},{text:"盘点",x:this.buttonX,y:Math.min(o-60,this.buttonY+e)},{text:"入库",x:Math.max(0,this.buttonX-e),y:this.buttonY},{text:"出库",x:Math.min(n-60,this.buttonX+e),y:this.buttonY}],this.showAdditionalButtons=!0,this.isButtonDisabled=!0}},handleButtonClick:function(e){if("明细"===e&&t.navigateTo({url:"/subpackageA/inventoryDetails/index?id="+this.form.ID}),"盘点"===e&&(this.title=e,this.$refs.stockPopup.open()),"入库"===e){var n=t.getStorageSync("user_page")["fe:workbench"],o=n.find((function(t){return"入库"===t.Name}));o?(this.title=e,this.$refs.inoutPopup.open()):t.showToast({title:"暂无权限",icon:"error"})}if("出库"===e){var i=t.getStorageSync("user_page")["fe:workbench"],r=i.find((function(t){return"出库"===t.Name}));r?(this.title=e,this.$refs.inoutPopup.open()):t.showToast({title:"暂无权限"})}this.showAdditionalButtons=!1,this.isButtonDisabled=!1},onCategoryChange:function(t){this.form.category=this.categories[t.detail.value]},decodeAndShowImage:function(e){var n=this;return(0,a.default)(r.default.mark((function o(){var i;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,i=n.getPureBase64(e),o.next=4,n.base64ToTempFilePath(i);case 4:n.imagePath=o.sent,console.log(n.imagePath,"this.imagePath"),o.next=12;break;case 8:o.prev=8,o.t0=o["catch"](0),t.showToast({title:"图片解码失败",icon:"none"}),console.error(o.t0);case 12:case"end":return o.stop()}}),o,null,[[0,8]])})))()},getPureBase64:function(t){return t.replace(/^data:image\/\w+;base64,/,"")},base64ToTempFilePath:function(t){return new Promise((function(e,n){var i=o.base64ToArrayBuffer(t),r="".concat(o.env.USER_DATA_PATH,"/temp_").concat(Date.now(),".png");o.getFileSystemManager().writeFile({filePath:r,data:i,encoding:"binary",success:function(){return e(r)},fail:function(t){return n(t)}})}))},decodeBase64:function(e){var n=e.replace(/^data:.+;base64,/,"");return t.base64ToArrayBuffer(n)}},mounted:function(){this.getGoodsItme()}});e.default=f}).call(this,n(2)["default"],n(1)["default"])},219:function(t,e,n){"use strict";n.r(e);var o=n(220),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},220:function(t,e,n){}},[[213,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/subpackageA/itemDetail/index.js.map