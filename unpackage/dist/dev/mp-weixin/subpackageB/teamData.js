require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpackageB/teamData"],{309:function(e,n,t){"use strict";(function(e,n){var o=t(4);t(26);o(t(25));var r=o(t(310));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t(1)["default"],t(2)["createPage"])},310:function(e,n,t){"use strict";t.r(n);var o=t(311),r=t(313);for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t(315);var u,s=t(32),c=Object(s["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,"b6fd4e30",null,!1,o["components"],u);c.options.__file="subpackageB/teamData.vue",n["default"]=c.exports},311:function(e,n,t){"use strict";t.r(n);var o=t(312);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},312:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return r})),t.d(n,"staticRenderFns",(function(){return u})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return o}));try{o={uniIcons:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(t.bind(null,360))},uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,345))},uniPopupDialog:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(t.bind(null,479))},inviteFriendsPopup:function(){return t.e("components/inviteFriends-popup/inviteFriends-popup").then(t.bind(null,491))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,n=e.$createElement;e._self._c},i=!1,u=[];r._withStripped=!0},313:function(e,n,t){"use strict";t.r(n);var o=t(314),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},314:function(e,n,t){"use strict";(function(e){var o=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t(43)),i=o(t(45)),u=t(46),s=function(){t.e("components/inviteFriends-popup/inviteFriends-popup").then(function(){return resolve(t(491))}.bind(null,t)).catch(t.oe)},c={data:function(){return{adminGroups:[],InvitedCode:"",teamData:{superuser:"超级管理员",operator:"操作员",financial:"财务员"},roleOptions:[{label:"超级管理员",value:"superuser"},{label:"财务员",value:"financial"},{label:"操作员",value:"operator"}],currentUser:{},selectedRole:""}},components:{inviteFriendsPopup:s},methods:{delAdmin:function(n){var t=this;return(0,i.default)(r.default.mark((function o(){return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log(n),o.next=3,(0,u.deleteHotelUser)({ID:n.ID}).then((function(n){n.ErrorMsg?e.showToast({title:n.ErrorMsg,icon:"none"}):(e.showToast({title:"删除成功",icon:"none"}),t.getHotelUsers())}));case 3:case"end":return o.stop()}}),o)})))()},showFilter:function(e){this.currentUser=JSON.parse(JSON.stringify(e)),this.selectedRole=e.roleValue,this.$refs.popup.open()},closeFilter:function(){this.selectedRole="",this.$refs.popup.close()},roleChange:function(e){this.selectedRole=e.detail.value},confirmRole:function(){this.updateHotelUser(this.currentUser.ID,this.selectedRole)},getHotelUsers:function(){var e=this;return(0,i.default)(r.default.mark((function n(){var t;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,u.getHotelUser)();case 3:t=n.sent,console.log(t),e.adminGroups=t.Data,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},updateHotelUser:function(n,t){var o=this;return(0,i.default)(r.default.mark((function i(){var s;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return"superuser"===t&&e.showToast({title:"超级管理员一旦修改，你将不再是超级管理员，请谨慎操作",icon:"none"}),s={ID:n,UserHotelRole:{Role:t}},r.next=4,(0,u.updateHotelUser)(s).then((function(n){if(n.ErrorMsg)e.showToast({title:n.ErrorMsg,icon:"none"});else{e.showToast({title:"权限修改成功",icon:"none"});var t=o.adminGroups.findIndex((function(e){return e.ID===o.currentUser.ID}));if(-1!==t){var r=o.roleOptions.find((function(e){return e.value===o.selectedRole}));r&&(o.adminGroups[t].UserHotelRole.Role=o.selectedRole)}o.$refs.popup.close(),o.getHotelUsers()}}));case 4:case"end":return r.stop()}}),i)})))()},addAdmin:function(){this.$refs.InviteFriendsPopup.open()},onShareAppMessage:function(n){console.log(n,"分享好友");var t=e.getStorageSync("user_info");return console.log(t.Hotel.ID,"888"),{title:"快来加入我们吧",path:"/pages/user/user?InvitedByCode=".concat(this.InvitedCode,"&InvitedByHotelID=").concat(t.Hotel.ID),imageUrl:"/static/img/weixin.png",desc:"自己有会员，经营更稳健",success:function(n){console.log("分享成功",n),e.showToast({title:"分享成功"})},fail:function(e){console.log("分享失败",e)}}},onShareTimeline:function(){return{title:this.shareData.title,query:"ref=".concat(e.getStorageSync("userId")),imageUrl:this.shareData.image}}},mounted:function(){this.getHotelUsers(),this.InvitedCode=e.getStorageSync("user_info").InvitedCode,console.log(this.InvitedCode)}};n.default=c}).call(this,t(2)["default"])},315:function(e,n,t){"use strict";t.r(n);var o=t(316),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},316:function(e,n,t){}},[[309,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/subpackageB/teamData.js.map