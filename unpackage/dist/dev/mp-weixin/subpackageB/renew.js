require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpackageB/renew"],{268:function(e,t,n){"use strict";(function(e,t){var r=n(4);n(26);r(n(25));var o=r(n(269));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},269:function(e,t,n){"use strict";n.r(t);var r=n(270),o=n(272);for(var c in o)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(c);n(274);var i,a=n(32),u=Object(a["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],i);u.options.__file="subpackageB/renew.vue",t["default"]=u.exports},270:function(e,t,n){"use strict";n.r(t);var r=n(271);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},271:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return i})),n.d(t,"recyclableRender",(function(){return c})),n.d(t,"components",(function(){return r}));var o=function(){var e=this,t=e.$createElement;e._self._c},c=!1,i=[];o._withStripped=!0},272:function(e,t,n){"use strict";n.r(t);var r=n(273),o=n.n(r);for(var c in r)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(c);t["default"]=o.a},273:function(e,t,n){"use strict";(function(e){var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(51)),c=r(n(11)),i=r(n(53)),a=n(54);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){Promise.all([n.e("common/vendor"),n.e("subpackageB/components/commonHeader")]).then(function(){return resolve(n(436))}.bind(null,n)).catch(n.oe)},l={components:{commonHeader:f},data:function(){return{packageList:[{Name:"年费会员",Price:"198",Month:12,index:0},{Name:"3年会员",Price:"298",Month:36,index:1},{Name:"终身会员",Price:"998",Month:-1,index:2}],couponList:[],one:"",two:"",selectedIndex:0,coupon:0,finalPrice:0}},methods:{getUserShopping:function(){var t=this;return(0,i.default)(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,a.getUserShopping)().then((function(n){n.ErrorMsg?e.showToast({title:n.ErrorMsg,icon:"none"}):t.couponList=n.Data}));case 2:case"end":return n.stop()}}),n)})))()},getUserPrime:function(){var t=this;return(0,i.default)(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,a.getUserPrime)().then((function(n){n.ErrorMsg?e.showToast({title:n.ErrorMsg,icon:"none"}):t.packageList=n.Data}));case 2:case"end":return n.stop()}}),n)})))()},handlePayment:function(){var t=this;return(0,i.default)(o.default.mark((function n(){var r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.getPaymentParams();case 3:r=n.sent,e.requestPayment(s(s({provider:"wxpay"},r),{},{success:function(t){console.log("支付成功:",t),e.showToast({title:"支付成功",icon:"success"})},fail:function(t){console.error("支付失败:",t),e.showToast({title:"支付失败",icon:"none"})}})),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),console.error("获取支付参数失败:",n.t0),e.showToast({title:"获取支付参数失败",icon:"none"});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},getPaymentParams:function(){return(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e({timeStamp:"1621234567890",nonceStr:"5K8264ILTKCH16CQ2502SI8ZNMTM67VS",package:"prepay_id=wx2021052017001234567890",signType:"MD5",paySign:"C428A6F0F5E6B8C7D8E9F0A1B2C3D4E5"})}),1e3)})));case 1:case"end":return e.stop()}}),e)})))()},selectPackage:function(e,t){var n=this;console.log(e,t),this.packageList.map((function(t){t.ID==e&&(n.one=t.Price)})),this.couponList.map((function(t){t.ID==e?n.two=t.Price:n.two=0})),this.coupon=this.two,this.finalPrice=this.one-this.two,this.selectedIndex=t}},mounted:function(){var e=this;this.getUserPrime(),this.getUserShopping(),setTimeout((function(){e.selectPackage(e.packageList[0].ID,0)}),100)}};t.default=l}).call(this,n(2)["default"])},274:function(e,t,n){"use strict";n.r(t);var r=n(275),o=n.n(r);for(var c in r)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(c);t["default"]=o.a},275:function(e,t,n){}},[[268,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/subpackageB/renew.js.map